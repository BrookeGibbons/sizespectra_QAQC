maxn$Exped
setdiff(meta$Exped, fl$Exped) # 10 expeds in meta not in fl
setdiff(meta$Exped, maxn$Exped) # 0 expeds in meta not in maxn
setdiff(maxn$Exped, meta$Exped) # 0 expeds in maxn not in meta
unique(maxn$Exped)
unique(meta$Exped)
meta <- read_meta_benthic()
unique(maxn1$NewOpCode)
unique(maxn1$NewOpCode)
unique(maxn$NewOpCode)
unique(maxn$NewOpCode[maxn$Exped %in% c("Sudan2017", "Sudan2016", "Sudan2015")])
unique(maxn1$NewOpCode[maxn1$Exped %in% c("Sudan2017", "Sudan2016", "Sudan2015")])
########################################################################################################################################
########### benthic bruvs
### read benthic bruvs data
expeds <- read_exped()
fl <- read_fl_benthic()
maxn <- read_maxn_benthic()
meta <- read_meta_benthic()
### clean data
#clean meta
meta <- clean_meta_benthic(meta)
#clean fl
fl <- clean_fl_benthic(fl)
#clean maxn
maxn <- clean_maxn_benthic(maxn)
### remove expeditions that are not permitted to be used in this study
#select expeds based on permission
expeds_notpermitted <- expeds$`New Exped`[expeds$Permission == "No"]
#maxn
maxn <- removed_notpermitted_expeditions_benthic(maxn, expeds_notpermitted)
#fl
fl <- removed_notpermitted_expeditions_benthic(fl, expeds_notpermitted)
#meta
meta <- removed_notpermitted_expeditions_benthic(meta, expeds_notpermitted)
### select fish families
fish_families <- c("Glaucosomatidae", "Labridae", "Lethrinidae", "Pomacanthidae", "Scaridae", "Serranidae", "Sparidae", "Carangidae",
"Chaetodontidae", "Haemulidae", "Kyphosidae", "Mullidae", "Pomacentridae", "Dasyatidae", "Acanthuridae", "Muraenidae",
"Siganidae","Pseudochromidae", "Monacanthidae", "Tetraodontidae","Heterodontidae", "Lutjanidae", "Aulopidae", "Orectolobidae", "Clupeidae",
"Nemipteridae",  "Enoplosidae", "Myliobatidae",  "Scorpaenidae", "Scorpididae",   "Rhinidae", "Carcharhinidae","Sphyrnidae",
"Arripidae","Caesionidae",  "Scombridae",    "Gobiidae", "Pinguipedidae", "Cheilodactylidae", "Aracanidae",    "Microcanthidae",
"Platycephalidae", "Rhinobatidae", "Urolophidae",   "Ephippidae",   "Synodontidae",  "Blenniidae",   "Caesioscorpididae", "Apogonidae",   "Plesiopidae",
"Echeneidae",   "Cirrhitidae",   "Girellidae",   "Neosebastidae", "Scyliorhinidae", "Lamnidae", "Hemigaleidae",  "Sillaginidae",  "Grammistidae",
"Sphyraenidae",  "Pempheridae",  "Gerreidae","Alopiidae",  "Odacidae", "Sebastidae",   "Pleuronectidae", "Parascylliidae", "Rachycentridae","Zanclidae",
"Antennariidae", "Veliferidae",  "Triakidae","Terapontidae", "Berycidae","Dinolestidae", "Diodontidae",   "Oplegnathidae", "Pristiophoridae",
"Chironemidae",  "Gempylidae",    "Mobulidae",    "Balistidae",    "Cheloniidae",  "Holocentridae",  "Aulostomidae",  "Ginglymostomatidae",
"Ostraciidae",   "Malacanthidae", "Clinidae", "Microdesmidae", "Stegostomatidae", "Fistulariidae", "Belonidae",  "Albulidae","Priacanthidae",
"Hemiscylliidae","Tripterygiidae", "Odontaspididae","Plotosidae",   "Elopidae", "Paralichthyidae", "Bothidae", "Ariidae", "Latidae",  "Oneirodidae",
"Syngnathidae",  "Callionymidae", "Opistognathidae", "Centriscidae", "Trichonotidae", "Pristidae",   "Congridae","Chanidae", "Samaridae",
"Aplodactylidae", "Zeidae",   "Melanostomiidae", "Monodactylidae","Leiognathidae", "Atherinidae",   "Hemiramphidae", "Pentacerotidae",
"Triglidae", "Rhinopteridae", "Istiophoridae", "Soleidae", "Pimelodidae",  "Chirocentridae","Chimaeridae",  "Chlorophthalmidae",
"Squalidae",    "Polymixiidae",  "Centrophoridae", "Macrouridae",   "Centrolophidae", "Polyprionidae", "Zeniontidae", "Hexanchidae",
"Euclichthyidae",  "Torpedinidae",  "Macroramphosidae", "Rajidae",  "Trichiuridae", "Myxinidae","Trachichthyidae", "Etmopteridae",  "Ophidiidae",
"Moridae",  "Molidae",  "Acropomatidae", "Myctophidae",  "Tetrarogidae",  "Salangidae",   "Scatophagidae", "Acanthoclinidae" , "Ophichthidae",
"Gobiesocidae", "Carapidae","Peristediidae", "labridae", "carangidae",  "balistidae",    "cirrhitidae",   "Polynemidae",   "Mugilidae",
"Eleotridae",    "Tetrabrachiidae" , "caesionidae",   "serranidae",   "Trygonorrhinidae", "Sciaenidae",   "Pomatomidae",   "Stomiidae",
"Rhombosoleidae","Monocentridae", "Rhyncobatus",  "Glaucostegidae", "ACANTHURIDAE",  "BALISTIDAE", "BLENNIDEA","LABRIDAE", "MULLIDAE",
"PINGUIPEDIDAE", "POMACENTRIDAE", "SERRANIDAE",   "CARANGIDAE",    "CHAETODONTIDAE", "LETHRINIDAE",   "MOBULIDAE", "NEMIPTERIDAE",
"POMACANTHIDAE", "SCARIDAE", "SIGANIDAE",  "TETRAODONTIDAE","CIRRHITIDAE",  "DASYATIDAE",    "HOLOCENTRIDAE", "LUTJANIDAE",  "ANTHIINAE",
"CAESIONIDAE",   "GOBIIDAE", "PSEUDOCHROMIDAE", "MURAENIDAE", "HAEMULIDAE",  "EPHIPPIDAE", "MICRODESMIDAE", "SPHYRAENIDAE", "MONACANTHIDAE",
"MALACANTHIDAE", "DIODONTIDAE",   "ECHENEIDIDAE", "SPARIDAE", "OSTRACIIDAE",   "KYPHOSIDAE",    "SYNODONTIDAE",  "BLENNIDAE",
"CHARCHARHINIDAE", "PEMPHERIDAE",  "APLOACTINIDAE", "CONGRIDAE", "PRIACANTHIDAE", "HEMIRAMPHIDAE", "SCORPAENIDAE",  "APOGONIDAE",
"FISTULARIIDAE", "TORPEDINIDAE",  "Gadidae", "Lotidae", "Cottidae",   "Trachinidae",  "Anarhichadidae")
#maxn
maxn = select_fish_families_benthic(maxn, fish_families)
#fl
fl = select_fish_families_benthic(fl, fish_families)
########## recode opcodes
sel <- setdiff(maxn$NewOpCode, meta$NewOpCode) #112 opcodes in maxn but not in meta
maxn1 = subset(maxn, NewOpCode %in% sel)
maxn1 [,c("NewOpCode", "Exped")] %>%
dplyr::distinct() -> maxn1
sel <- setdiff(fl$NewOpCode, meta$NewOpCode) #911 opcodes in fl but not in meta
fl1 = subset(fl, NewOpCode %in% sel)
fl1 [,c("NewOpCode", "Exped")] %>%
dplyr::distinct() -> fl1
sel <- setdiff(maxn$NewOpCode, meta$NewOpCode) #112 opcodes in maxn but not in meta
sel
sel <- setdiff(fl$NewOpCode, meta$NewOpCode) #911 opcodes in fl but not in meta
sel
#load all functions
devtools::load_all()
expeds <- read_exped()
fl <- read_fl_benthic()
maxn <- read_maxn_benthic()
meta <- read_meta_benthic()
### clean data
#clean meta
meta <- clean_meta_benthic(meta)
#clean fl
fl <- clean_fl_benthic(fl)
#clean maxn
maxn <- clean_maxn_benthic(maxn)
### remove expeditions that are not permitted to be used in this study
#select expeds based on permission
expeds_notpermitted <- expeds$`New Exped`[expeds$Permission == "No"]
#maxn
maxn <- removed_notpermitted_expeditions_benthic(maxn, expeds_notpermitted)
#fl
fl <- removed_notpermitted_expeditions_benthic(fl, expeds_notpermitted)
#meta
meta <- removed_notpermitted_expeditions_benthic(meta, expeds_notpermitted)
### select fish families
fish_families <- c("Glaucosomatidae", "Labridae", "Lethrinidae", "Pomacanthidae", "Scaridae", "Serranidae", "Sparidae", "Carangidae",
"Chaetodontidae", "Haemulidae", "Kyphosidae", "Mullidae", "Pomacentridae", "Dasyatidae", "Acanthuridae", "Muraenidae",
"Siganidae","Pseudochromidae", "Monacanthidae", "Tetraodontidae","Heterodontidae", "Lutjanidae", "Aulopidae", "Orectolobidae", "Clupeidae",
"Nemipteridae",  "Enoplosidae", "Myliobatidae",  "Scorpaenidae", "Scorpididae",   "Rhinidae", "Carcharhinidae","Sphyrnidae",
"Arripidae","Caesionidae",  "Scombridae",    "Gobiidae", "Pinguipedidae", "Cheilodactylidae", "Aracanidae",    "Microcanthidae",
"Platycephalidae", "Rhinobatidae", "Urolophidae",   "Ephippidae",   "Synodontidae",  "Blenniidae",   "Caesioscorpididae", "Apogonidae",   "Plesiopidae",
"Echeneidae",   "Cirrhitidae",   "Girellidae",   "Neosebastidae", "Scyliorhinidae", "Lamnidae", "Hemigaleidae",  "Sillaginidae",  "Grammistidae",
"Sphyraenidae",  "Pempheridae",  "Gerreidae","Alopiidae",  "Odacidae", "Sebastidae",   "Pleuronectidae", "Parascylliidae", "Rachycentridae","Zanclidae",
"Antennariidae", "Veliferidae",  "Triakidae","Terapontidae", "Berycidae","Dinolestidae", "Diodontidae",   "Oplegnathidae", "Pristiophoridae",
"Chironemidae",  "Gempylidae",    "Mobulidae",    "Balistidae",    "Cheloniidae",  "Holocentridae",  "Aulostomidae",  "Ginglymostomatidae",
"Ostraciidae",   "Malacanthidae", "Clinidae", "Microdesmidae", "Stegostomatidae", "Fistulariidae", "Belonidae",  "Albulidae","Priacanthidae",
"Hemiscylliidae","Tripterygiidae", "Odontaspididae","Plotosidae",   "Elopidae", "Paralichthyidae", "Bothidae", "Ariidae", "Latidae",  "Oneirodidae",
"Syngnathidae",  "Callionymidae", "Opistognathidae", "Centriscidae", "Trichonotidae", "Pristidae",   "Congridae","Chanidae", "Samaridae",
"Aplodactylidae", "Zeidae",   "Melanostomiidae", "Monodactylidae","Leiognathidae", "Atherinidae",   "Hemiramphidae", "Pentacerotidae",
"Triglidae", "Rhinopteridae", "Istiophoridae", "Soleidae", "Pimelodidae",  "Chirocentridae","Chimaeridae",  "Chlorophthalmidae",
"Squalidae",    "Polymixiidae",  "Centrophoridae", "Macrouridae",   "Centrolophidae", "Polyprionidae", "Zeniontidae", "Hexanchidae",
"Euclichthyidae",  "Torpedinidae",  "Macroramphosidae", "Rajidae",  "Trichiuridae", "Myxinidae","Trachichthyidae", "Etmopteridae",  "Ophidiidae",
"Moridae",  "Molidae",  "Acropomatidae", "Myctophidae",  "Tetrarogidae",  "Salangidae",   "Scatophagidae", "Acanthoclinidae" , "Ophichthidae",
"Gobiesocidae", "Carapidae","Peristediidae", "labridae", "carangidae",  "balistidae",    "cirrhitidae",   "Polynemidae",   "Mugilidae",
"Eleotridae",    "Tetrabrachiidae" , "caesionidae",   "serranidae",   "Trygonorrhinidae", "Sciaenidae",   "Pomatomidae",   "Stomiidae",
"Rhombosoleidae","Monocentridae", "Rhyncobatus",  "Glaucostegidae", "ACANTHURIDAE",  "BALISTIDAE", "BLENNIDEA","LABRIDAE", "MULLIDAE",
"PINGUIPEDIDAE", "POMACENTRIDAE", "SERRANIDAE",   "CARANGIDAE",    "CHAETODONTIDAE", "LETHRINIDAE",   "MOBULIDAE", "NEMIPTERIDAE",
"POMACANTHIDAE", "SCARIDAE", "SIGANIDAE",  "TETRAODONTIDAE","CIRRHITIDAE",  "DASYATIDAE",    "HOLOCENTRIDAE", "LUTJANIDAE",  "ANTHIINAE",
"CAESIONIDAE",   "GOBIIDAE", "PSEUDOCHROMIDAE", "MURAENIDAE", "HAEMULIDAE",  "EPHIPPIDAE", "MICRODESMIDAE", "SPHYRAENIDAE", "MONACANTHIDAE",
"MALACANTHIDAE", "DIODONTIDAE",   "ECHENEIDIDAE", "SPARIDAE", "OSTRACIIDAE",   "KYPHOSIDAE",    "SYNODONTIDAE",  "BLENNIDAE",
"CHARCHARHINIDAE", "PEMPHERIDAE",  "APLOACTINIDAE", "CONGRIDAE", "PRIACANTHIDAE", "HEMIRAMPHIDAE", "SCORPAENIDAE",  "APOGONIDAE",
"FISTULARIIDAE", "TORPEDINIDAE",  "Gadidae", "Lotidae", "Cottidae",   "Trachinidae",  "Anarhichadidae")
#maxn
maxn = select_fish_families_benthic(maxn, fish_families)
#fl
fl = select_fish_families_benthic(fl, fish_families)
########## recode opcodes
sel <- setdiff(maxn$NewOpCode, meta$NewOpCode) #112 opcodes in maxn but not in meta
sel
sel <- setdiff(fl$NewOpCode, meta$NewOpCode) #911 opcodes in fl but not in meta
sel
fl1 = subset(fl, NewOpCode %in% sel)
fl1 [,c("NewOpCode", "Exped")] %>%
dplyr::distinct() -> fl1
sel <- setdiff(maxn$NewOpCode, meta$NewOpCode) #112 opcodes in maxn but not in meta
maxn1 = subset(maxn, NewOpCode %in% sel)
maxn1 [,c("NewOpCode", "Exped")] %>%
dplyr::distinct() -> maxn1
sel <- setdiff(fl$NewOpCode, meta$NewOpCode) #911 opcodes in fl but not in meta
fl1 = subset(fl, NewOpCode %in% sel)
fl1 [,c("NewOpCode", "Exped")] %>%
dplyr::distinct() -> fl1
str_sub(x, start= -6)
[1] "string"
#load all functions
devtools::load_all()
########################################################################################################################################
########### benthic bruvs
### read benthic bruvs data
expeds <- read_exped()
fl <- read_fl_benthic()
maxn <- read_maxn_benthic()
meta <- read_meta_benthic()
### clean data
#clean meta
meta <- clean_meta_benthic(meta)
#clean fl
fl <- clean_fl_benthic(fl)
#clean maxn
maxn <- clean_maxn_benthic(maxn)
### remove expeditions that are not permitted to be used in this study
#select expeds based on permission
expeds_notpermitted <- expeds$`New Exped`[expeds$Permission == "No"]
#maxn
maxn <- removed_notpermitted_expeditions_benthic(maxn, expeds_notpermitted)
#fl
fl <- removed_notpermitted_expeditions_benthic(fl, expeds_notpermitted)
#meta
meta <- removed_notpermitted_expeditions_benthic(meta, expeds_notpermitted)
### select fish families
fish_families <- c("Glaucosomatidae", "Labridae", "Lethrinidae", "Pomacanthidae", "Scaridae", "Serranidae", "Sparidae", "Carangidae",
"Chaetodontidae", "Haemulidae", "Kyphosidae", "Mullidae", "Pomacentridae", "Dasyatidae", "Acanthuridae", "Muraenidae",
"Siganidae","Pseudochromidae", "Monacanthidae", "Tetraodontidae","Heterodontidae", "Lutjanidae", "Aulopidae", "Orectolobidae", "Clupeidae",
"Nemipteridae",  "Enoplosidae", "Myliobatidae",  "Scorpaenidae", "Scorpididae",   "Rhinidae", "Carcharhinidae","Sphyrnidae",
"Arripidae","Caesionidae",  "Scombridae",    "Gobiidae", "Pinguipedidae", "Cheilodactylidae", "Aracanidae",    "Microcanthidae",
"Platycephalidae", "Rhinobatidae", "Urolophidae",   "Ephippidae",   "Synodontidae",  "Blenniidae",   "Caesioscorpididae", "Apogonidae",   "Plesiopidae",
"Echeneidae",   "Cirrhitidae",   "Girellidae",   "Neosebastidae", "Scyliorhinidae", "Lamnidae", "Hemigaleidae",  "Sillaginidae",  "Grammistidae",
"Sphyraenidae",  "Pempheridae",  "Gerreidae","Alopiidae",  "Odacidae", "Sebastidae",   "Pleuronectidae", "Parascylliidae", "Rachycentridae","Zanclidae",
"Antennariidae", "Veliferidae",  "Triakidae","Terapontidae", "Berycidae","Dinolestidae", "Diodontidae",   "Oplegnathidae", "Pristiophoridae",
"Chironemidae",  "Gempylidae",    "Mobulidae",    "Balistidae",    "Cheloniidae",  "Holocentridae",  "Aulostomidae",  "Ginglymostomatidae",
"Ostraciidae",   "Malacanthidae", "Clinidae", "Microdesmidae", "Stegostomatidae", "Fistulariidae", "Belonidae",  "Albulidae","Priacanthidae",
"Hemiscylliidae","Tripterygiidae", "Odontaspididae","Plotosidae",   "Elopidae", "Paralichthyidae", "Bothidae", "Ariidae", "Latidae",  "Oneirodidae",
"Syngnathidae",  "Callionymidae", "Opistognathidae", "Centriscidae", "Trichonotidae", "Pristidae",   "Congridae","Chanidae", "Samaridae",
"Aplodactylidae", "Zeidae",   "Melanostomiidae", "Monodactylidae","Leiognathidae", "Atherinidae",   "Hemiramphidae", "Pentacerotidae",
"Triglidae", "Rhinopteridae", "Istiophoridae", "Soleidae", "Pimelodidae",  "Chirocentridae","Chimaeridae",  "Chlorophthalmidae",
"Squalidae",    "Polymixiidae",  "Centrophoridae", "Macrouridae",   "Centrolophidae", "Polyprionidae", "Zeniontidae", "Hexanchidae",
"Euclichthyidae",  "Torpedinidae",  "Macroramphosidae", "Rajidae",  "Trichiuridae", "Myxinidae","Trachichthyidae", "Etmopteridae",  "Ophidiidae",
"Moridae",  "Molidae",  "Acropomatidae", "Myctophidae",  "Tetrarogidae",  "Salangidae",   "Scatophagidae", "Acanthoclinidae" , "Ophichthidae",
"Gobiesocidae", "Carapidae","Peristediidae", "labridae", "carangidae",  "balistidae",    "cirrhitidae",   "Polynemidae",   "Mugilidae",
"Eleotridae",    "Tetrabrachiidae" , "caesionidae",   "serranidae",   "Trygonorrhinidae", "Sciaenidae",   "Pomatomidae",   "Stomiidae",
"Rhombosoleidae","Monocentridae", "Rhyncobatus",  "Glaucostegidae", "ACANTHURIDAE",  "BALISTIDAE", "BLENNIDEA","LABRIDAE", "MULLIDAE",
"PINGUIPEDIDAE", "POMACENTRIDAE", "SERRANIDAE",   "CARANGIDAE",    "CHAETODONTIDAE", "LETHRINIDAE",   "MOBULIDAE", "NEMIPTERIDAE",
"POMACANTHIDAE", "SCARIDAE", "SIGANIDAE",  "TETRAODONTIDAE","CIRRHITIDAE",  "DASYATIDAE",    "HOLOCENTRIDAE", "LUTJANIDAE",  "ANTHIINAE",
"CAESIONIDAE",   "GOBIIDAE", "PSEUDOCHROMIDAE", "MURAENIDAE", "HAEMULIDAE",  "EPHIPPIDAE", "MICRODESMIDAE", "SPHYRAENIDAE", "MONACANTHIDAE",
"MALACANTHIDAE", "DIODONTIDAE",   "ECHENEIDIDAE", "SPARIDAE", "OSTRACIIDAE",   "KYPHOSIDAE",    "SYNODONTIDAE",  "BLENNIDAE",
"CHARCHARHINIDAE", "PEMPHERIDAE",  "APLOACTINIDAE", "CONGRIDAE", "PRIACANTHIDAE", "HEMIRAMPHIDAE", "SCORPAENIDAE",  "APOGONIDAE",
"FISTULARIIDAE", "TORPEDINIDAE",  "Gadidae", "Lotidae", "Cottidae",   "Trachinidae",  "Anarhichadidae")
#maxn
maxn = select_fish_families_benthic(maxn, fish_families)
#fl
fl = select_fish_families_benthic(fl, fish_families)
########## recode opcodes
sel <- setdiff(maxn$NewOpCode, meta$NewOpCode) #112 opcodes in maxn but not in meta
maxn1 = subset(maxn, NewOpCode %in% sel)
maxn1 [,c("NewOpCode", "Exped")] %>%
dplyr::distinct() -> maxn1
sel <- setdiff(fl$NewOpCode, meta$NewOpCode) #911 opcodes in fl but not in meta
fl1 = subset(fl, NewOpCode %in% sel)
fl1 [,c("NewOpCode", "Exped")] %>%
dplyr::distinct() -> fl1
#load all functions
devtools::load_all()
########################################################################################################################################
########### benthic bruvs
### read benthic bruvs data
expeds <- read_exped()
fl <- read_fl_benthic()
maxn <- read_maxn_benthic()
meta <- read_meta_benthic()
### clean data
#clean meta
meta <- clean_meta_benthic(meta)
#clean fl
fl <- clean_fl_benthic(fl)
#clean maxn
maxn <- clean_maxn_benthic(maxn)
### remove expeditions that are not permitted to be used in this study
#select expeds based on permission
expeds_notpermitted <- expeds$`New Exped`[expeds$Permission == "No"]
#maxn
maxn <- removed_notpermitted_expeditions_benthic(maxn, expeds_notpermitted)
#fl
fl <- removed_notpermitted_expeditions_benthic(fl, expeds_notpermitted)
#meta
meta <- removed_notpermitted_expeditions_benthic(meta, expeds_notpermitted)
### select fish families
fish_families <- c("Glaucosomatidae", "Labridae", "Lethrinidae", "Pomacanthidae", "Scaridae", "Serranidae", "Sparidae", "Carangidae",
"Chaetodontidae", "Haemulidae", "Kyphosidae", "Mullidae", "Pomacentridae", "Dasyatidae", "Acanthuridae", "Muraenidae",
"Siganidae","Pseudochromidae", "Monacanthidae", "Tetraodontidae","Heterodontidae", "Lutjanidae", "Aulopidae", "Orectolobidae", "Clupeidae",
"Nemipteridae",  "Enoplosidae", "Myliobatidae",  "Scorpaenidae", "Scorpididae",   "Rhinidae", "Carcharhinidae","Sphyrnidae",
"Arripidae","Caesionidae",  "Scombridae",    "Gobiidae", "Pinguipedidae", "Cheilodactylidae", "Aracanidae",    "Microcanthidae",
"Platycephalidae", "Rhinobatidae", "Urolophidae",   "Ephippidae",   "Synodontidae",  "Blenniidae",   "Caesioscorpididae", "Apogonidae",   "Plesiopidae",
"Echeneidae",   "Cirrhitidae",   "Girellidae",   "Neosebastidae", "Scyliorhinidae", "Lamnidae", "Hemigaleidae",  "Sillaginidae",  "Grammistidae",
"Sphyraenidae",  "Pempheridae",  "Gerreidae","Alopiidae",  "Odacidae", "Sebastidae",   "Pleuronectidae", "Parascylliidae", "Rachycentridae","Zanclidae",
"Antennariidae", "Veliferidae",  "Triakidae","Terapontidae", "Berycidae","Dinolestidae", "Diodontidae",   "Oplegnathidae", "Pristiophoridae",
"Chironemidae",  "Gempylidae",    "Mobulidae",    "Balistidae",    "Cheloniidae",  "Holocentridae",  "Aulostomidae",  "Ginglymostomatidae",
"Ostraciidae",   "Malacanthidae", "Clinidae", "Microdesmidae", "Stegostomatidae", "Fistulariidae", "Belonidae",  "Albulidae","Priacanthidae",
"Hemiscylliidae","Tripterygiidae", "Odontaspididae","Plotosidae",   "Elopidae", "Paralichthyidae", "Bothidae", "Ariidae", "Latidae",  "Oneirodidae",
"Syngnathidae",  "Callionymidae", "Opistognathidae", "Centriscidae", "Trichonotidae", "Pristidae",   "Congridae","Chanidae", "Samaridae",
"Aplodactylidae", "Zeidae",   "Melanostomiidae", "Monodactylidae","Leiognathidae", "Atherinidae",   "Hemiramphidae", "Pentacerotidae",
"Triglidae", "Rhinopteridae", "Istiophoridae", "Soleidae", "Pimelodidae",  "Chirocentridae","Chimaeridae",  "Chlorophthalmidae",
"Squalidae",    "Polymixiidae",  "Centrophoridae", "Macrouridae",   "Centrolophidae", "Polyprionidae", "Zeniontidae", "Hexanchidae",
"Euclichthyidae",  "Torpedinidae",  "Macroramphosidae", "Rajidae",  "Trichiuridae", "Myxinidae","Trachichthyidae", "Etmopteridae",  "Ophidiidae",
"Moridae",  "Molidae",  "Acropomatidae", "Myctophidae",  "Tetrarogidae",  "Salangidae",   "Scatophagidae", "Acanthoclinidae" , "Ophichthidae",
"Gobiesocidae", "Carapidae","Peristediidae", "labridae", "carangidae",  "balistidae",    "cirrhitidae",   "Polynemidae",   "Mugilidae",
"Eleotridae",    "Tetrabrachiidae" , "caesionidae",   "serranidae",   "Trygonorrhinidae", "Sciaenidae",   "Pomatomidae",   "Stomiidae",
"Rhombosoleidae","Monocentridae", "Rhyncobatus",  "Glaucostegidae", "ACANTHURIDAE",  "BALISTIDAE", "BLENNIDEA","LABRIDAE", "MULLIDAE",
"PINGUIPEDIDAE", "POMACENTRIDAE", "SERRANIDAE",   "CARANGIDAE",    "CHAETODONTIDAE", "LETHRINIDAE",   "MOBULIDAE", "NEMIPTERIDAE",
"POMACANTHIDAE", "SCARIDAE", "SIGANIDAE",  "TETRAODONTIDAE","CIRRHITIDAE",  "DASYATIDAE",    "HOLOCENTRIDAE", "LUTJANIDAE",  "ANTHIINAE",
"CAESIONIDAE",   "GOBIIDAE", "PSEUDOCHROMIDAE", "MURAENIDAE", "HAEMULIDAE",  "EPHIPPIDAE", "MICRODESMIDAE", "SPHYRAENIDAE", "MONACANTHIDAE",
"MALACANTHIDAE", "DIODONTIDAE",   "ECHENEIDIDAE", "SPARIDAE", "OSTRACIIDAE",   "KYPHOSIDAE",    "SYNODONTIDAE",  "BLENNIDAE",
"CHARCHARHINIDAE", "PEMPHERIDAE",  "APLOACTINIDAE", "CONGRIDAE", "PRIACANTHIDAE", "HEMIRAMPHIDAE", "SCORPAENIDAE",  "APOGONIDAE",
"FISTULARIIDAE", "TORPEDINIDAE",  "Gadidae", "Lotidae", "Cottidae",   "Trachinidae",  "Anarhichadidae")
#maxn
maxn = select_fish_families_benthic(maxn, fish_families)
#fl
fl = select_fish_families_benthic(fl, fish_families)
########## recode opcodes
sel <- setdiff(maxn$NewOpCode, meta$NewOpCode) #112 opcodes in maxn but not in meta
maxn1 = subset(maxn, NewOpCode %in% sel)
maxn1 [,c("NewOpCode", "Exped")] %>%
dplyr::distinct() -> maxn1
sel <- setdiff(fl$NewOpCode, meta$NewOpCode) #911 opcodes in fl but not in meta
fl1 = subset(fl, NewOpCode %in% sel)
fl1 [,c("NewOpCode", "Exped")] %>%
dplyr::distinct() -> fl1
setdiff(fl$NewOpCode, meta$NewOpCode)
setdiff(meta$Exped, fl$Exped) # 10 expeds in meta not in fl
setdiff(meta$Exped, maxn$Exped) # 0 expeds in meta not in maxn
setdiff(maxn$Exped, meta$Exped) # 0 expeds in maxn not in meta
### read benthic bruvs data
expeds <- read_exped()
fl <- read_fl_benthic()
maxn <- read_maxn_benthic()
meta <- read_meta_benthic()
#load all functions
devtools::load_all()
########################################################################################################################################
########### benthic bruvs
### read benthic bruvs data
expeds <- read_exped()
fl <- read_fl_benthic()
maxn <- read_maxn_benthic()
meta <- read_meta_benthic()
### clean data
#clean meta
meta <- clean_meta_benthic(meta)
#clean fl
fl <- clean_fl_benthic(fl)
#clean maxn
maxn <- clean_maxn_benthic(maxn)
### remove expeditions that are not permitted to be used in this study
#select expeds based on permission
expeds_notpermitted <- expeds$`New Exped`[expeds$Permission == "No"]
#maxn
maxn <- removed_notpermitted_expeditions_benthic(maxn, expeds_notpermitted)
#fl
fl <- removed_notpermitted_expeditions_benthic(fl, expeds_notpermitted)
#meta
meta <- removed_notpermitted_expeditions_benthic(meta, expeds_notpermitted)
### select fish families
fish_families <- c("Glaucosomatidae", "Labridae", "Lethrinidae", "Pomacanthidae", "Scaridae", "Serranidae", "Sparidae", "Carangidae",
"Chaetodontidae", "Haemulidae", "Kyphosidae", "Mullidae", "Pomacentridae", "Dasyatidae", "Acanthuridae", "Muraenidae",
"Siganidae","Pseudochromidae", "Monacanthidae", "Tetraodontidae","Heterodontidae", "Lutjanidae", "Aulopidae", "Orectolobidae", "Clupeidae",
"Nemipteridae",  "Enoplosidae", "Myliobatidae",  "Scorpaenidae", "Scorpididae",   "Rhinidae", "Carcharhinidae","Sphyrnidae",
"Arripidae","Caesionidae",  "Scombridae",    "Gobiidae", "Pinguipedidae", "Cheilodactylidae", "Aracanidae",    "Microcanthidae",
"Platycephalidae", "Rhinobatidae", "Urolophidae",   "Ephippidae",   "Synodontidae",  "Blenniidae",   "Caesioscorpididae", "Apogonidae",   "Plesiopidae",
"Echeneidae",   "Cirrhitidae",   "Girellidae",   "Neosebastidae", "Scyliorhinidae", "Lamnidae", "Hemigaleidae",  "Sillaginidae",  "Grammistidae",
"Sphyraenidae",  "Pempheridae",  "Gerreidae","Alopiidae",  "Odacidae", "Sebastidae",   "Pleuronectidae", "Parascylliidae", "Rachycentridae","Zanclidae",
"Antennariidae", "Veliferidae",  "Triakidae","Terapontidae", "Berycidae","Dinolestidae", "Diodontidae",   "Oplegnathidae", "Pristiophoridae",
"Chironemidae",  "Gempylidae",    "Mobulidae",    "Balistidae",    "Cheloniidae",  "Holocentridae",  "Aulostomidae",  "Ginglymostomatidae",
"Ostraciidae",   "Malacanthidae", "Clinidae", "Microdesmidae", "Stegostomatidae", "Fistulariidae", "Belonidae",  "Albulidae","Priacanthidae",
"Hemiscylliidae","Tripterygiidae", "Odontaspididae","Plotosidae",   "Elopidae", "Paralichthyidae", "Bothidae", "Ariidae", "Latidae",  "Oneirodidae",
"Syngnathidae",  "Callionymidae", "Opistognathidae", "Centriscidae", "Trichonotidae", "Pristidae",   "Congridae","Chanidae", "Samaridae",
"Aplodactylidae", "Zeidae",   "Melanostomiidae", "Monodactylidae","Leiognathidae", "Atherinidae",   "Hemiramphidae", "Pentacerotidae",
"Triglidae", "Rhinopteridae", "Istiophoridae", "Soleidae", "Pimelodidae",  "Chirocentridae","Chimaeridae",  "Chlorophthalmidae",
"Squalidae",    "Polymixiidae",  "Centrophoridae", "Macrouridae",   "Centrolophidae", "Polyprionidae", "Zeniontidae", "Hexanchidae",
"Euclichthyidae",  "Torpedinidae",  "Macroramphosidae", "Rajidae",  "Trichiuridae", "Myxinidae","Trachichthyidae", "Etmopteridae",  "Ophidiidae",
"Moridae",  "Molidae",  "Acropomatidae", "Myctophidae",  "Tetrarogidae",  "Salangidae",   "Scatophagidae", "Acanthoclinidae" , "Ophichthidae",
"Gobiesocidae", "Carapidae","Peristediidae", "labridae", "carangidae",  "balistidae",    "cirrhitidae",   "Polynemidae",   "Mugilidae",
"Eleotridae",    "Tetrabrachiidae" , "caesionidae",   "serranidae",   "Trygonorrhinidae", "Sciaenidae",   "Pomatomidae",   "Stomiidae",
"Rhombosoleidae","Monocentridae", "Rhyncobatus",  "Glaucostegidae", "ACANTHURIDAE",  "BALISTIDAE", "BLENNIDEA","LABRIDAE", "MULLIDAE",
"PINGUIPEDIDAE", "POMACENTRIDAE", "SERRANIDAE",   "CARANGIDAE",    "CHAETODONTIDAE", "LETHRINIDAE",   "MOBULIDAE", "NEMIPTERIDAE",
"POMACANTHIDAE", "SCARIDAE", "SIGANIDAE",  "TETRAODONTIDAE","CIRRHITIDAE",  "DASYATIDAE",    "HOLOCENTRIDAE", "LUTJANIDAE",  "ANTHIINAE",
"CAESIONIDAE",   "GOBIIDAE", "PSEUDOCHROMIDAE", "MURAENIDAE", "HAEMULIDAE",  "EPHIPPIDAE", "MICRODESMIDAE", "SPHYRAENIDAE", "MONACANTHIDAE",
"MALACANTHIDAE", "DIODONTIDAE",   "ECHENEIDIDAE", "SPARIDAE", "OSTRACIIDAE",   "KYPHOSIDAE",    "SYNODONTIDAE",  "BLENNIDAE",
"CHARCHARHINIDAE", "PEMPHERIDAE",  "APLOACTINIDAE", "CONGRIDAE", "PRIACANTHIDAE", "HEMIRAMPHIDAE", "SCORPAENIDAE",  "APOGONIDAE",
"FISTULARIIDAE", "TORPEDINIDAE",  "Gadidae", "Lotidae", "Cottidae",   "Trachinidae",  "Anarhichadidae")
#maxn
maxn = select_fish_families_benthic(maxn, fish_families)
#fl
fl = select_fish_families_benthic(fl, fish_families)
########## recode opcodes
sel <- setdiff(maxn$NewOpCode, meta$NewOpCode) #112 opcodes in maxn but not in meta
maxn1 = subset(maxn, NewOpCode %in% sel)
maxn1 [,c("NewOpCode", "Exped")] %>%
dplyr::distinct() -> maxn1
sel <- setdiff(fl$NewOpCode, meta$NewOpCode) #911 opcodes in fl but not in meta
fl1 = subset(fl, NewOpCode %in% sel)
fl1 [,c("NewOpCode", "Exped")] %>%
dplyr::distinct() -> fl1
setdiff(meta$Exped, fl$Exped) # 6 expeds in meta not in fl
setdiff(meta$Exped, maxn$Exped) # 0 expeds in meta not in maxn
setdiff(maxn$Exped, meta$Exped) # 0 expeds in maxn not in meta
#load all functions
devtools::load_all()
#to use pipe operator
library(magrittr)
########################################################################################################################################
########### pelagic bruvs
### read pelagic bruvs data
meta <- read_meta_pelagic()
maxn <- read_maxn_pelagic()
fl <- read_fl_pelagic()
### clean data
# clean maxn
maxn1 <- clean_maxn_pelagic(maxn)
# clean fl
fl1 <- clean_fl_pelagic(fl)
sort(unique(maxn$Binomial))
sort(unique(maxn1$Binomial))
#load all functions
devtools::load_all()
### clean data
# clean maxn
maxn1 <- clean_maxn_pelagic(maxn)
# clean fl
fl1 <- clean_fl_pelagic(fl)
sort(unique(maxn1$Binomial))
sort(unique(fl$Binomial))
sort(unique(fl1$Binomial))
Variola louti vs variola louti
Thalassoma lunare vs thalassoma lunare
Plectropomus pessuliferus vs plectropomus pessuliferus
Plectropomus leopardus vs plectropomus leopardus
Pomacentrus indicus vs pomacentrus indicus
Pentapodus paradiseus vs pentapodus paradiseus
Mulloidichthys flavolineatus vs mulloidichthys flavolineatus
Meiacanthus smithi vs meiacanthus smithi
Macolor sp vs macolor sp
Lethrinus microdon vs lethrinus microdon
Gymnocranius grandoculis vs gymnocranius grandoculis
Girella tephraeops vs girella tephraeops
Decapterus sp vs decapterus sp
Ctenochaetus striatus vs ctenochaetus striatus
Coris auricularis vs coris auricularis
Chromis viridis vs chromis viridis
"Caesio caerulaurea" vs "Caesio caerulaurea " [EXTRA SPACE AFTER THE SPECIES COMES OUT AS DIFFERENT ENTRY]
Blenniidae sp vs blenniidae sp
Amblygobius semicinctus vs amblygobius semicinctus
Amblyeleotris aurora vs amblyeleotris aurora
#load all functions
devtools::load_all()
Amblyeleotris aurora vs amblyeleotris aurora
########################################################################################################################################
########### benthic bruvs
### read benthic bruvs data
expeds <- read_exped()
fl <- read_fl_benthic()
maxn <- read_maxn_benthic()
meta <- read_meta_benthic()
#clean fl
fl1 <- clean_fl_benthic(fl)
#clean maxn
maxn1 <- clean_maxn_benthic(maxn)
order(unique(fl$Binomial))
sort(unique(fl$Binomial))
sort(unique(fl$Binomial))
sort(unique(maxn$Binomial))
sort(unique(maxn1$Binomial))
#load all functions
devtools::load_all()
########################################################################################################################################
########### benthic bruvs
### read benthic bruvs data
expeds <- read_exped()
fl <- read_fl_benthic()
maxn <- read_maxn_benthic()
meta <- read_meta_benthic()
fl1 <- clean_fl_benthic(fl)
sort(unique(fl$Binomial))
sort(unique(maxn$Binomial))
maxn1 <- clean_maxn_benthic(maxn)
sort(unique(maxn1$Binomial))
########################################################################################################################################
########### benthic bruvs
### read benthic bruvs data
expeds <- read_exped()
fl <- read_fl_benthic()
maxn <- read_maxn_benthic()
meta <- read_meta_benthic()
### clean data
#clean meta
meta <- clean_meta_benthic(meta)
#clean fl
fl <- clean_fl_benthic(fl)
#clean maxn
maxn <- clean_maxn_benthic(maxn)
### remove expeditions that are not permitted to be used in this study
#select expeds based on permission
expeds_notpermitted <- expeds$`New Exped`[expeds$Permission == "No"]
#maxn
maxn <- removed_notpermitted_expeditions_benthic(maxn, expeds_notpermitted)
#fl
fl <- removed_notpermitted_expeditions_benthic(fl, expeds_notpermitted)
#meta
meta <- removed_notpermitted_expeditions_benthic(meta, expeds_notpermitted)
### select fish families
fish_families <- c("Glaucosomatidae", "Labridae", "Lethrinidae", "Pomacanthidae", "Scaridae", "Serranidae", "Sparidae", "Carangidae",
"Chaetodontidae", "Haemulidae", "Kyphosidae", "Mullidae", "Pomacentridae", "Dasyatidae", "Acanthuridae", "Muraenidae",
"Siganidae","Pseudochromidae", "Monacanthidae", "Tetraodontidae","Heterodontidae", "Lutjanidae", "Aulopidae", "Orectolobidae", "Clupeidae",
"Nemipteridae",  "Enoplosidae", "Myliobatidae",  "Scorpaenidae", "Scorpididae",   "Rhinidae", "Carcharhinidae","Sphyrnidae",
"Arripidae","Caesionidae",  "Scombridae",    "Gobiidae", "Pinguipedidae", "Cheilodactylidae", "Aracanidae",    "Microcanthidae",
"Platycephalidae", "Rhinobatidae", "Urolophidae",   "Ephippidae",   "Synodontidae",  "Blenniidae",   "Caesioscorpididae", "Apogonidae",   "Plesiopidae",
"Echeneidae",   "Cirrhitidae",   "Girellidae",   "Neosebastidae", "Scyliorhinidae", "Lamnidae", "Hemigaleidae",  "Sillaginidae",  "Grammistidae",
"Sphyraenidae",  "Pempheridae",  "Gerreidae","Alopiidae",  "Odacidae", "Sebastidae",   "Pleuronectidae", "Parascylliidae", "Rachycentridae","Zanclidae",
"Antennariidae", "Veliferidae",  "Triakidae","Terapontidae", "Berycidae","Dinolestidae", "Diodontidae",   "Oplegnathidae", "Pristiophoridae",
"Chironemidae",  "Gempylidae",    "Mobulidae",    "Balistidae",    "Cheloniidae",  "Holocentridae",  "Aulostomidae",  "Ginglymostomatidae",
"Ostraciidae",   "Malacanthidae", "Clinidae", "Microdesmidae", "Stegostomatidae", "Fistulariidae", "Belonidae",  "Albulidae","Priacanthidae",
"Hemiscylliidae","Tripterygiidae", "Odontaspididae","Plotosidae",   "Elopidae", "Paralichthyidae", "Bothidae", "Ariidae", "Latidae",  "Oneirodidae",
"Syngnathidae",  "Callionymidae", "Opistognathidae", "Centriscidae", "Trichonotidae", "Pristidae",   "Congridae","Chanidae", "Samaridae",
"Aplodactylidae", "Zeidae",   "Melanostomiidae", "Monodactylidae","Leiognathidae", "Atherinidae",   "Hemiramphidae", "Pentacerotidae",
"Triglidae", "Rhinopteridae", "Istiophoridae", "Soleidae", "Pimelodidae",  "Chirocentridae","Chimaeridae",  "Chlorophthalmidae",
"Squalidae",    "Polymixiidae",  "Centrophoridae", "Macrouridae",   "Centrolophidae", "Polyprionidae", "Zeniontidae", "Hexanchidae",
"Euclichthyidae",  "Torpedinidae",  "Macroramphosidae", "Rajidae",  "Trichiuridae", "Myxinidae","Trachichthyidae", "Etmopteridae",  "Ophidiidae",
"Moridae",  "Molidae",  "Acropomatidae", "Myctophidae",  "Tetrarogidae",  "Salangidae",   "Scatophagidae", "Acanthoclinidae" , "Ophichthidae",
"Gobiesocidae", "Carapidae","Peristediidae", "labridae", "carangidae",  "balistidae",    "cirrhitidae",   "Polynemidae",   "Mugilidae",
"Eleotridae",    "Tetrabrachiidae" , "caesionidae",   "serranidae",   "Trygonorrhinidae", "Sciaenidae",   "Pomatomidae",   "Stomiidae",
"Rhombosoleidae","Monocentridae", "Rhyncobatus",  "Glaucostegidae", "ACANTHURIDAE",  "BALISTIDAE", "BLENNIDEA","LABRIDAE", "MULLIDAE",
"PINGUIPEDIDAE", "POMACENTRIDAE", "SERRANIDAE",   "CARANGIDAE",    "CHAETODONTIDAE", "LETHRINIDAE",   "MOBULIDAE", "NEMIPTERIDAE",
"POMACANTHIDAE", "SCARIDAE", "SIGANIDAE",  "TETRAODONTIDAE","CIRRHITIDAE",  "DASYATIDAE",    "HOLOCENTRIDAE", "LUTJANIDAE",  "ANTHIINAE",
"CAESIONIDAE",   "GOBIIDAE", "PSEUDOCHROMIDAE", "MURAENIDAE", "HAEMULIDAE",  "EPHIPPIDAE", "MICRODESMIDAE", "SPHYRAENIDAE", "MONACANTHIDAE",
"MALACANTHIDAE", "DIODONTIDAE",   "ECHENEIDIDAE", "SPARIDAE", "OSTRACIIDAE",   "KYPHOSIDAE",    "SYNODONTIDAE",  "BLENNIDAE",
"CHARCHARHINIDAE", "PEMPHERIDAE",  "APLOACTINIDAE", "CONGRIDAE", "PRIACANTHIDAE", "HEMIRAMPHIDAE", "SCORPAENIDAE",  "APOGONIDAE",
"FISTULARIIDAE", "TORPEDINIDAE",  "Gadidae", "Lotidae", "Cottidae",   "Trachinidae",  "Anarhichadidae")
#maxn
maxn = select_fish_families_benthic(maxn, fish_families)
#fl
fl = select_fish_families_benthic(fl, fish_families)
########## recode opcodes
sel <- setdiff(maxn$NewOpCode, meta$NewOpCode) #112 opcodes in maxn but not in meta
maxn1 = subset(maxn, NewOpCode %in% sel)
maxn1 [,c("NewOpCode", "Exped")] %>%
dplyr::distinct() -> maxn1
sel <- setdiff(fl$NewOpCode, meta$NewOpCode) #911 opcodes in fl but not in meta
fl1 = subset(fl, NewOpCode %in% sel)
fl1 [,c("NewOpCode", "Exped")] %>%
dplyr::distinct() -> fl1
setdiff(maxn$NewOpCode, meta$NewOpCode) #112 opcodes in maxn but not in meta
nrow(meta)
maxn <- read_maxn_benthic()
maxn1 <- clean_maxn_benthic(maxn)
sort(unique(maxn1$Binomial))
sort(unique(maxn$Binomial))
